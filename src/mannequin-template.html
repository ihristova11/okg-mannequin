<!DOCTYPE html>

<html>

<head>
	<script src="three.min.js"></script>
	<style>
		body {
			color: black;
			text-shadow: 0 0 3px gray;
			text-align: center;
			font-family: Calibri;
		}

		label {
			cursor: default;
			margin: 0 1em;
		}
	</style>
</head>

<body>
	<!-- Въведете ф.н, група, имена + заглавие на домашното -->
	<h1>
		ф.н. 82071 &ndash; група 6 &ndash; Ирина Христова<br>
		Шах
	</h1>

	<script src="human.js"></script>
	<script>
		const loader = new THREE.TextureLoader();
		scene.background = loader.load(
			'https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/b3010b4e-6a23-4983-824c-9521d8b55ba6/d4imqy2-50f566be-cc3f-433c-8d60-1131b553b40f.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOiIsImlzcyI6InVybjphcHA6Iiwib2JqIjpbW3sicGF0aCI6IlwvZlwvYjMwMTBiNGUtNmEyMy00OTgzLTgyNGMtOTUyMWQ4YjU1YmE2XC9kNGltcXkyLTUwZjU2NmJlLWNjM2YtNDMzYy04ZDYwLTExMzFiNTUzYjQwZi5wbmcifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6ZmlsZS5kb3dubG9hZCJdfQ.3DxtBAujpA2a8lTqd0oHfUaiUPRAzuG5q_SpRTkWsj4'
		);
		//camera=new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 1000 );

		camera.position.set(0, 25, 225);

		// дефиниция на човечетата и статичната им поза
		var woman = new Female();
		woman.position.y = -12;
		woman.position.x = 30;
		woman.l_leg.bend(90);
		woman.r_leg.bend(90);
		woman.l_knee.bend(90);
		woman.r_knee.bend(90);
		woman.l_arm.bend(25);
		woman.l_elbow.bend(150);
		woman.r_arm.bend(25);
		woman.r_elbow.bend(150);
		woman.turn(-180);

		var woman2 = new Female();
		woman2.position.x = 70;
		woman2.position.z = 40;
		woman2.position.y = 2;
		woman2.turn(100);


		var man = new Male();
		man.position.y = -10;
		man.position.x = -30;
		man.l_leg.bend(90);
		man.r_leg.bend(90);
		man.l_knee.bend(90);
		man.r_knee.bend(90);
		man.l_arm.bend(25);
		man.l_elbow.bend(150);
		man.r_arm.bend(25);
		man.r_elbow.bend(150);




		// chess figures
		const white = new THREE.Mesh(new THREE.BoxGeometry(4, 0, 4), new THREE.MeshBasicMaterial({
			color: '#ffd9b3'
		}));
		white.position.y = -4;
		white.position.z = -10;
		var black = new THREE.Mesh(new THREE.BoxGeometry(4, 0, 4), new THREE.MeshBasicMaterial({
			color: '#4d2600'
		}));
		black.position.y = -4;
		black.position.z = -10;
		black.position.x = 4;
		//scene.add(white, black);
		// chess board
		for (var i = 1; i <= 8; i++) {
			for (var j = 1; j <= 8; j++) {
				var fig = white.clone();
				if ((i + j) % 2 == 0) {
					var fig = black.clone();
				}
				fig.position.x = i * 4 - 18;
				fig.position.z = 4 * j - 18;
				scene.add(fig);
			}
		}

		var sampleWhite = new THREE.Mesh(new THREE.BoxGeometry(1, 5, 1), new THREE.MeshBasicMaterial({
			map: loader.load(
				'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQOY1MdDVw3YcoEGVUzRGxSDflDsmMvrXjNTQ&usqp=CAU'
				)
		}));
		sampleWhite.position.y = -2.5;
		sampleWhite.position.x = -14;
		sampleWhite.position.z = -14;

		// display white figures
		for (var i = 1; i <= 2; i++) {
			for (var j = 1; j <= 8; j++) {
				var f = sampleWhite.clone();
				f.position.x = -19 + 4.5 * i;
				f.position.z = -18 + 4 * j;
				if (i == 2) {
					f.position.y = -4;
				}
				scene.add(f);
			}
		}

		var sampleBlack = new THREE.Mesh(new THREE.BoxGeometry(1, 5, 1), new THREE.MeshBasicMaterial({
			map: loader.load(
				'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwfQ9EMIsLC4UwcLYavygSmKO6M4sY_CESCA&usqp=CAU'
				)
		}));
		sampleBlack.position.y = -2.5;
		sampleBlack.position.x = -14;
		sampleBlack.position.z = -14;

		// display black figures
		for (var i = 1; i <= 2; i++) {
			for (var j = 1; j <= 8; j++) {
				var f = sampleBlack.clone();
				f.position.x = 19 - 4.5 * i;
				f.position.z = 18 - 4 * j;
				if (i == 2) {
					f.position.y = -4;
				}
				scene.add(f);
			}
		}




		const boxWidth = 50;
		const boxHeight = 1.5;
		const boxDepth = 40;
		const texture = loader.load(
			'https://images.pexels.com/photos/129733/pexels-photo-129733.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500');
		const geometry = new THREE.BoxGeometry(boxWidth, boxHeight, boxDepth);
		const material = new THREE.MeshBasicMaterial({
			map: texture
		});
		const table = new THREE.Mesh(geometry, material);
		table.position.y = -5;
		table.castShadow = true;
		table.receiveShadow = true;
		scene.add(table);

		var tableLeg = new THREE.Mesh(new THREE.BoxGeometry(1.5, 30, 1.5), material);
		tableLeg.position.x = 10;
		tableLeg.position.y = -20;
		tableLeg.position.z = 10;
		tableLeg.castShadow = true;
		tableLeg.receiveShadow = true;

		var tableLeg2 = tableLeg.clone();
		tableLeg2.position.x = -10;

		var tableLeg3 = tableLeg.clone();
		tableLeg3.position.x = -10;
		tableLeg3.position.z = -10;

		var tableLeg4 = tableLeg3.clone();
		tableLeg4.position.x = 10;
		scene.add(tableLeg, tableLeg2, tableLeg3, tableLeg4);

		const chessGeometry = new THREE.BoxGeometry(35, 0, 35);
		const chessMaterial = new THREE.MeshBasicMaterial({
			map: loader.load(
				'https://d2gg9evh47fn9z.cloudfront.net/800px_COLOURBOX20459486.jpg'
			)
		});
		const chess = new THREE.Mesh(chessGeometry, chessMaterial);
		chess.position.y = -4.5;
		//scene.add(chess);

		var chair = new THREE.Mesh(new THREE.BoxGeometry(12, 1, 12), material);
		chair.position.x = 30;
		chair.position.y = -17;
		chair.castShadow = true;
		chair.receiveShadow = true;
		scene.add(chair);

		var chairLeg1 = new THREE.Mesh(new THREE.BoxGeometry(1.5, 15, 1.5), material);
		chairLeg1.position.x = 33;
		chairLeg1.position.y = -25;
		chairLeg1.position.z = -2;
		chairLeg1.castShadow = true;
		chairLeg1.receiveShadow = true;

		var chairLeg2 = chairLeg1.clone();
		chairLeg2.position.z = 2;

		var chairLeg3 = chairLeg1.clone();
		chairLeg3.position.x = 27.5;
		chairLeg3.position.z = 2;

		var chairLeg4 = chairLeg3.clone();
		chairLeg4.position.z = -2;

		scene.add(chairLeg1, chairLeg2, chairLeg3, chairLeg4);

		var chair2 = new THREE.Mesh(new THREE.BoxGeometry(12, 1, 12), material);
		chair2.position.x = -30;
		chair2.position.y = -15;
		chair2.castShadow = true;
		chair2.receiveShadow = true;
		scene.add(chair2);

		var chair2Leg1 = new THREE.Mesh(new THREE.BoxGeometry(1.5, 15, 1.5), material);
		chair2Leg1.position.x = -33;
		chair2Leg1.position.y = -22;
		chair2Leg1.position.z = -2;
		chair2Leg1.castShadow = true;
		chair2Leg1.receiveShadow = true;

		var chair2Leg2 = chair2Leg1.clone();
		chair2Leg2.position.z = 2;

		var chair2Leg3 = chair2Leg1.clone();
		chair2Leg3.position.x = -27.5;
		chair2Leg3.position.z = 2;

		var chair2Leg4 = chair2Leg3.clone();
		chair2Leg4.position.z = -2;

		scene.add(chair2Leg1, chair2Leg2, chair2Leg3, chair2Leg4);
		// анимация на човечетата, поза в момент t
		function animate(t) {
			woman.head.tilt(10 * cos(2 * t));
			man.head.nod(10 * cos(2 * t));
			woman.r_knee.bend(-10 * cos(-2 * t));
			woman.r_ankle.bend(-10 * cos(-2 * t));
			woman.r_arm.tilt(10 * cos(t));
			woman.r_leg.straddle(15);
			woman.l_leg.straddle(-35);



			//	woman2.r_knee.bend(45);
			woman2.l_elbow.bend(150);
			woman2.r_elbow.bend(150);
			woman2.r_elbow.tilt(25 * cos(4 * t));
			woman2.r_arm.tilt(0.5 * cos(4 * t));
			woman2.l_elbow.tilt(-25 * cos(4 * t));
			woman2.l_arm.tilt(-0.5 * cos(4 * t));
			woman2.l_knee.bend(170);
			woman2.r_knee.bend(170);

			woman2.l_leg.bend(60);
			woman2.r_leg.bend(60);
			woman2.position.y = 5 * cos(2 * t);
			woman2.l_knee.tilt(-45);
			woman2.r_knee.tilt(45);
			woman2.turn(180);

			man.r_leg.raise(95 + 3 * cos(5 * t));
			//man.bend(t);


			//woman2.r_leg.bend(10*cos(2*t));
			// въртим сцената
			scene.rotation.y = t / 1000;
		}
	</script>
</body>

</html>